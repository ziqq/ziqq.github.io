(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{FhIb:function(e,t,n){"use strict";n.r(t);var a=n("L2JU"),r=n("/fAC"),i=n("tDv4"),o=n("IuEo"),s=n("lX81");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function p(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var a=s.apply(e,o);function r(e){u(a,t,n,r,i,"next",e)}function i(e){u(a,t,n,r,i,"throw",e)}r(void 0)})}}var v,d,h,m={name:"client-edit",data:function(){return{tab:1,loading:!0,dialogDeleteClient:!1,genderArray:[],clientTypes:[],clientType:0,clientTypeName:"",clientTypeColor:"",clientID:0,avatar:"",birthday:"",comment:"",email:"",gender:"Не выбран",name:"",phone:"",sale:"",status:0}},mounted:(h=p(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vue.$fetch.get("/clients/".concat(this.$route.params.id,"/edit"));case 3:t=e.sent,n=t.client,console.log(n),this.genderArray=t.genders,this.clientTypes=t.clientTypes.map(function(e){return{text:e.name,value:e.clientTypeID,color:e.color.color}}),this.avatar=n.avatar,this.birthday=n.birthday,this.clientID=n.clientID,this.comment=n.comment,this.clientType=n.clientTypeID,this.email=n.email,this.gender=n.gender,this.name=n.name,this.phone=n.phone,this.sale=n.sale,this.status=n.status,this.loading=!1,this.clientTypeShow(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}},e,this,[[0,23]])})),function(){return h.apply(this,arguments)}),computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Object(a.b)(["CLIENTS"])),methods:{back:function(){this.$router.push("/clients/base")},clientTypeShow:function(){var t=this,e=this.clientTypes.find(function(e){return e.value==t.clientType});e?(this.clientTypeName=e.text,this.clientTypeColor=e.color,console.log(e.color)):(this.clientTypeName="",this.clientTypeColor="#fff")},deleteClient:(d=p(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vue.$fetch.delete("/clients/".concat(this.$route.params.id));case 3:t=e.sent,console.log(t),this.dialogDeleteClient=!1,this.$router.push("/clients/base"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])})),function(){return d.apply(this,arguments)}),updateClient:(v=p(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vue.$fetch.put("/clients/".concat(this.$route.params.id),{avatar:this.avatar,birthday:this.birthday,clientID:this.clientID,clientTypeID:this.clientType,comment:this.comment,email:this.email,gender:this.gender,name:this.name,phone:this.phone,sale:this.sale,status:this.status});case 3:t=e.sent,this.$store.commit("MODIFY_CLIENTS",t),this.$router.push("/clients/base"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return v.apply(this,arguments)})},components:{FullScreen:r.a,Profile:s.a,InputPhone:i.a,InputBirthday:o.a}},f=(n("RmkH"),n("KHd+")),b=Object(f.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("full-screen",{attrs:{removeBtn:"",loading:t.loading,back:t.back},scopedSlots:t._u([{key:"leftContent",fn:function(){return[n("Profile",{attrs:{tile:!1,width:320,"max-width":320,data:{name:t.name,avatar:t.avatar,subname:t.phone||t.email}},scopedSlots:t._u([{key:"edit",fn:function(){return[n("label",{staticClass:"img-upload",attrs:{for:"img-upload"}},[n("svg",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"icon img-upload__icon",attrs:{symbol:"photo-camera"}}),t._v(" "),n("span",{staticClass:"img-upload__text"},[t._v("Обновить")]),t._v(" "),n("input",{staticClass:"visible-hidden",attrs:{type:"file",id:"img-upload"}})])]},proxy:!0},t.clientType?{key:"subcontent",fn:function(){return[n("v-divider",{staticClass:"divider"}),t._v(" "),n("span",{staticClass:"client-type"},[n("i",{staticClass:"client-type__marker",style:{"background-color":t.clientTypeColor}}),t._v(" "),n("span",[t._v(t._s(t.clientTypeName))])])]},proxy:!0}:null],null,!0)})]},proxy:!0},{key:"rightContent",fn:function(){return[n("v-container",[n("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab",[t._v("\n                    История заявок\n                ")]),t._v(" "),n("v-tab",[t._v("\n                    Информация\n                ")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab-item",[n("v-card",{attrs:{flat:""}},[n("v-card-text",[t._v("История заявок")])],1)],1),t._v(" "),n("v-tab-item",[n("v-row",[n("v-col",{attrs:{cols:"12",xs:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"Имя",outlined:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"6"}},[n("v-select",{attrs:{items:t.clientTypes,label:"Категория клиента",outlined:""},on:{change:t.clientTypeShow},model:{value:t.clientType,callback:function(e){t.clientType=e},expression:"clientType"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"6"}},[n("v-select",{attrs:{items:t.genderArray,label:"Пол",outlined:""},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"6"}},[n("input-phone",{attrs:{phone:t.phone},on:{phoneChange:function(e){t.phone=e}}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("input-birthday",{attrs:{birthday:t.birthday},on:{birthdayChange:function(e){t.birthday=e}}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"Email",outlined:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",xs:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"Скидка",outlined:""},model:{value:t.sale,callback:function(e){t.sale=e},expression:"sale"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{outlined:"",label:"Комментарий"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"footerBtn",fn:function(){return[n("v-btn",{attrs:{color:"pink lighten-1",dark:"",large:"",depressed:"","min-width":"150"},on:{click:function(e){t.dialogDeleteClient=!0}}},[t._v("Удалить")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"anchor",large:"",depressed:"","min-width":"150"},on:{click:t.back}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"primary",large:"",depressed:"",dark:"","min-width":"150"},on:{click:t.updateClient}},[t._v("Сохранить")])]},proxy:!0},{key:"dialog",fn:function(){return[n("v-dialog",{attrs:{"max-width":"320"},model:{value:t.dialogDeleteClient,callback:function(e){t.dialogDeleteClient=e},expression:"dialogDeleteClient"}},[n("v-card",{staticClass:"modal"},[n("v-card-title",{staticClass:"text-center"},[n("span",[t._v("Удалить клиента ")]),n("span",[t._v(t._s(t.name)+"?")])]),t._v(" "),n("v-card-text",{staticClass:"text-center"},[t._v("\n                    Подтверждая это действие вы удалите клиента без\n                    возможности его восстановления\n                ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogDeleteClient=!1}}},[t._v("\n                        Оставить\n                    ")]),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.deleteClient}},[t._v("\n                        Удалить\n                    ")])],1)],1)],1)]},proxy:!0}])})},[],!1,null,"d8136d20",null);t.default=b.exports},RmkH:function(e,t,n){"use strict";var a=n("kh45");n.n(a).a},kh45:function(e,t,n){}}]);